# CLAUDE.md - 한국식 전통 달력 웹 앱 구현 스펙

이 문서는 한국 전통 달력 웹 앱을 구현하기 위한 상세 스펙입니다.

## 🎯 프로젝트 개요

**목표**: React + TypeScript + Vite로 한국 전통 달력 웹 앱 구현
**특징**: 음력 표시, 공휴일 표시, 전통적인 디자인, GitHub Pages 자동 배포

## 🛠 기술 스택 및 의존성

- **Frontend**: React 19, TypeScript
- **Build Tool**: Vite 7
- **Package Manager**: pnpm@9.0.0 (Corepack 사용)
- **Styling**: CSS3 (Grid, Flexbox, Gradients)
- **Fonts**: Noto Sans KR (Google Fonts)
- **Required Libraries**:
  - `korean-lunar-calendar`: 한국 음력 계산
  - `date-holidays`: 공휴일 데이터
- **Deployment**: GitHub Pages + GitHub Actions

## 📐 레이아웃 구조

### 전체 레이아웃
```
┌─────────────────────────────────────────────────────────┐
│                    페이지 배경                              │
│  ┌─────────────────────────────────────────────────────┐  │
│  │                  달력 컨테이너                         │  │
│  │  ┌───────┐      ┌──────────┐      ┌───────┐        │  │
│  │  │이전달  │      │ 2024년 9월 │      │다음달  │        │  │
│  │  │미니달력│      │    제목     │      │미니달력│        │  │
│  │  └───────┘      └──────────┘      └───────┘        │  │
│  │  ┌─────────────────────────────────────────────────┐  │  │
│  │  │                메인 달력                        │  │  │
│  │  │  일  월  화  수  목  금  토                      │  │  │
│  │  │  ┌─┬─┬─┬─┬─┬─┬─┐                              │  │  │
│  │  │  │1│2│3│4│5│6│7│  <- 날짜 셀들                 │  │  │
│  │  │  ├─┼─┼─┼─┼─┼─┼─┤                              │  │  │
│  │  │  │ │ │ │ │ │ │ │                              │  │  │
│  │  │  └─┴─┴─┴─┴─┴─┴─┘                              │  │  │
│  │  └─────────────────────────────────────────────────┘  │  │
│  └─────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

### 날짜 셀 내부 구조
```
┌─────────────────────┐
│ 23        <- 날짜    │
│ 음 8.21   <- 음력    │
│                     │
│ 어린이날  <- 공휴일  │
│ 석가탄신일           │
│ 대체공휴일           │
└─────────────────────┘
```

## 🎨 디자인 스펙

### 색상 팔레트
- **배경 그라데이션**: #f8f9fa → #e9ecef (135도)
- **달력 배경**: 흰색 (#ffffff)
- **테두리**: #2c3e50 (3px)
- **일요일/공휴일**: #dc3545 (빨간색)
- **토요일**: #007bff (파란색)
- **오늘 날짜**: #ff9800 (오렌지) 배경 그라데이션
- **음력 정보**: #6c757d (회색) 배경 #f8f9fa
- **일반 공휴일**: #dc3545 (빨간색) 배경 rgba(220, 53, 69, 0.1)
- **대체공휴일**: #856404 (노란색) 배경 rgba(255, 193, 7, 0.1)
- **추석 연휴**: #bf360c (주황색) 배경 rgba(255, 87, 34, 0.1)
- **설날 연휴**: #7b1fa2 (보라색) 배경 rgba(156, 39, 176, 0.1)
- **키보드 포커스**: #007bff (파란색) 테두리

### 폰트 스펙
- **기본 폰트**: Noto Sans KR (Google Fonts)
- **날짜 숫자**: 20px, 700 weight
- **요일 헤더**: 18px, 700 weight, 흰색
- **음력 정보**: 11px, 500 weight
- **공휴일 정보**: 12px, 600 weight

### 애니메이션 효과
- **호버 효과**: transform: scale(1.02), box-shadow 변화
- **미니 달력 호버**: translateY(-2px), 그림자 확대
- **전환 시간**: 0.2s ~ 0.3s ease

### 반응형 브레이크포인트
- **데스크톱**: 1200px 이상 (풀 레이아웃)
- **태블릿**: 768px 이하 (미니 달력 세로 배치)
- **모바일**: 작은 폰트, 컴팩트 레이아웃

## 🌙 음력 표시 규칙

### 표시 조건
1. **음력 1일**: "음 9.1" 형태로 표시
2. **음력 15일**: "음 9.15" 형태로 표시
3. **음력 말일**: "음 9.29" 또는 "음 9.30" 형태로 표시

### 말일 판단 로직
- 다음날의 음력 날짜를 계산
- 다음날이 음력 1일이면 오늘이 말일
- korean-lunar-calendar 라이브러리 사용
- 클래스 인스턴스 생성 → setSolarDate() → getLunarCalendar()

### 음력 연휴 자동 계산
- **설날 연휴**: 음력 12월 29-30일, 1월 1-2일 (4일간)
- **추석 연휴**: 음력 8월 14-16일 (3일간)
- 연휴는 자동으로 "설날/추석" 또는 "설날/추석 연휴"로 표시

### 표시 스타일
- 회색 배경 (#f8f9fa)
- 둥근 모서리 (border-radius: 10px)
- 얇은 테두리 (#dee2e6)
- 가운데 정렬

## 🎌 공휴일 표시 규칙

### 데이터 소스
- date-holidays 라이브러리 사용
- 국가 코드: 'KR' (한국)
- holidays.getHolidays(year) 메서드 사용

### 공휴일 유형별 처리
1. **일반 공휴일**: 삼일절, 어린이날, 광복절, 개천절, 한글날 등
2. **대체공휴일**: 토/일 공휴일의 월요일 대체, 연속 공휴일 대체
3. **음력 연휴**: 설날/추석 연휴 자동 계산
4. **공휴일 겹침**: 같은 날 여러 공휴일 모두 표시

### 대체공휴일 규칙
- **토요일/일요일 공휴일** → 다음 월요일 대체공휴일
- **연속 공휴일에 일요일 포함** → 연휴 종료 후 첫 평일이 대체공휴일
- **공휴일 겹침** → 다음 평일이 대체공휴일
- **예외 공휴일**: 현충일, 성탄절, 신정, 근로자의날은 대체공휴일 미적용

### 표시 스타일
- **일반 공휴일**: 빨간색 (#dc3545)
- **대체공휴일**: 노란색 (#856404)
- **추석 연휴**: 주황색 (#bf360c)
- **설날 연휴**: 보라색 (#7b1fa2)
- 모든 공휴일: 둥근 모서리 (border-radius: 12px), 반투명 배경

### 색상 규칙
- 공휴일인 날의 날짜 숫자도 해당 색상 적용
- 미니 달력에도 동일한 색상 규칙 적용
- 일요일과 동일한 색상 처리

## 📅 달력 기능 스펙

### 메인 달력
- **레이아웃**: CSS Grid (7열)
- **요일 시작**: 일요일부터 시작
- **날짜 셀 크기**: 최소 높이 140px
- **이전/다음 달 날짜**: 흐릿하게 표시 (opacity: 0.6)

### 미니 달력 (상단 좌우)
- **위치**: 메인 제목 좌우
- **크기**: 최소 너비 220px
- **기능**: 클릭 시 해당 월로 이동
- **스타일**: 호버 시 위로 이동 및 그림자 효과
- **색상 표시**: 토요일, 일요일, 공휴일 색상 구분

### 키보드 네비게이션
- **좌우 화살표**: 월 단위 이동 (← 이전 달, → 다음 달)
- **상하 화살표**: 연도 단위 이동 (↑ 이전 년도, ↓ 다음 년도)
- **포커스 표시**: 파란색 테두리로 포커스 상태 표시
- **사용법 안내**: 포커스 시 우상단에 키보드 사용법 힌트 표시

### 오늘 날짜 하이라이트
- **배경**: 오렌지 그라데이션 (#fff3e0 → #ffe0b2)
- **테두리**: 3px solid #ff9800
- **그림자**: 0 0 20px rgba(255, 152, 0, 0.3)
- **날짜 원형**: 32x32px 오렌지 그라데이션 원

## 🏗 컴포넌트 구조

### App.tsx
- currentDate state 관리 (Date 타입)
- Calendar 컴포넌트에 props 전달

### Calendar.tsx
- CalendarProps 인터페이스 정의
- CalendarDate 인터페이스 정의 (날짜별 메타데이터)
- generateCalendarDates 함수 (달력 데이터 생성)
- getLunarDate 함수 (음력 계산)
- getAllHolidayInfo 함수 (모든 공휴일 정보 수집)
- getLunarHolidayInfo 함수 (음력 연휴 계산)
- getSubstituteHoliday 함수 (대체공휴일 계산)
- isSubstituteHolidayApplicable 함수 (대체공휴일 적용 여부)
- handleKeyNavigation 함수 (키보드 네비게이션)

### 필요한 TypeScript 타입
```typescript
interface CalendarProps {
  currentDate: Date
  onDateChange: (date: Date) => void
}

interface CalendarDate {
  date: number
  isCurrentMonth: boolean
  isToday: boolean
  isWeekend: boolean
  isSunday: boolean
  lunarInfo: string
  holiday: string
  holidays: string[]
  holidayType: 'normal' | 'substitute' | 'lunar_new_year' | 'chuseok' | ''
}
```

## 🚀 배포 설정

### Vite 설정
- base: '/claude-cal/' (GitHub Pages용)
- build.outDir: 'dist'

### GitHub Actions 요구사항
- Node.js 20 사용
- Corepack 활성화
- pnpm install --frozen-lockfile
- pnpm build 실행
- dist 폴더를 GitHub Pages에 배포

### 자동 배포 트리거
- main 브랜치 push 시 자동 실행
- Pages 환경에 배포

## 📋 구현 체크리스트

### 초기 설정
- [x] Vite React TypeScript 프로젝트 생성
- [x] pnpm 패키지 매니저 설정
- [x] korean-lunar-calendar, date-holidays 설치
- [x] Noto Sans KR 폰트 추가
- [x] TypeScript 타입 정의 생성

### 컴포넌트 구현
- [x] Calendar 컴포넌트 기본 구조
- [x] 음력 계산 로직 (1일, 15일, 말일)
- [x] 공휴일 표시 기능
- [x] 미니 달력 네비게이션
- [x] 오늘 날짜 하이라이트

### 고급 공휴일 기능
- [x] 대체공휴일 자동 계산
- [x] 추석/설날 연휴 자동 표시
- [x] 공휴일 겹침 처리
- [x] 공휴일 유형별 색상 구분
- [x] 대체공휴일 예외 처리

### 사용자 경험
- [x] 키보드 네비게이션 (화살표 키)
- [x] 미니 달력 색상 표시
- [x] 포커스 상태 표시
- [x] 키보드 사용법 안내

### 스타일링
- [x] 그라데이션 배경 적용
- [x] 전통 달력 스타일 구현
- [x] 요일별 색상 구분
- [x] 호버 애니메이션 효과
- [x] 반응형 디자인

### 배포
- [x] GitHub Actions 워크플로우 설정
- [x] GitHub Pages 설정
- [x] 자동 배포 확인

## 🎯 완성 기준

### 기능 완성도
1. ✅ 현재 월 달력 정확한 표시
2. ✅ 음력 1일, 15일, 말일 정확한 계산 및 표시
3. ✅ 한국 공휴일 정확한 표시 (대체공휴일, 연휴 포함)
4. ✅ 미니 달력 클릭으로 월 이동
5. ✅ 오늘 날짜 명확한 하이라이트
6. ✅ 키보드 네비게이션 (화살표 키)
7. ✅ 공휴일 겹침 및 연휴 자동 처리

### 디자인 완성도
1. ✅ 전통 달력의 시각적 느낌
2. ✅ 일요일/토요일 색상 구분
3. ✅ 공휴일 유형별 색상 구분 (일반/대체/추석/설날)
4. ✅ 부드러운 애니메이션 효과
5. ✅ 모든 기기에서 반응형 작동
6. ✅ 미니 달력 색상 표시

### 기술 완성도
1. ✅ TypeScript 타입 안전성
2. ✅ 성능 최적화 (useCallback, 이벤트 리스너 정리)
3. ✅ 접근성 고려 (키보드 네비게이션, 포커스 표시, 색상 대비)
4. ✅ GitHub Pages 자동 배포 작동
5. ✅ 한국 공휴일법 정확한 구현

### 새로운 기능들
- **고급 대체공휴일**: 토/일, 연속 공휴일, 공휴일 겹침 모든 경우 처리
- **음력 연휴 자동 계산**: 설날/추석 연휴 자동 감지 및 표시
- **키보드 접근성**: 화살표 키로 월/년도 네비게이션
- **시각적 구분**: 공휴일 유형별 색상 구분으로 한눈에 파악 가능

이 스펙을 기반으로 구현하면 동일한 품질의 한국 전통 달력 웹 앱을 완성할 수 있습니다.